<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ZENTROFUSCATOR | PRO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fengari/0.1.4/fengari-web.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700&display=swap');
        
        /* FULL SCREEN LOCK (Stops all scrolling) */
        html, body { 
            position: fixed; 
            overflow: hidden; 
            width: 100vw; 
            height: 100vh; 
            margin: 0; 
            padding: 0;
            background: #020202;
            font-family: 'Plus Jakarta Sans', sans-serif;
            touch-action: none;
        }

        .glass { background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.05); backdrop-filter: blur(25px); border-radius: 2rem; }
        .neon { color: #ff0055; text-shadow: 0 0 20px rgba(255, 0, 85, 0.3); }
        input[type="file"] { position: absolute; inset: 0; opacity: 0; cursor: pointer; z-index: 50; }
        .btn-glow { background: #ff0055; box-shadow: 0 0 20px rgba(255, 0, 85, 0.2); }
    </style>
</head>
<body class="flex items-center justify-center">

    <div class="w-full max-w-md p-6 space-y-8 animate-in fade-in duration-500">
        <div class="text-center">
            <h1 class="text-5xl font-black tracking-tighter italic uppercase">
                ZENTRO<span class="neon not-italic">FUSCATOR</span>
            </h1>
            <p class="text-gray-600 text-[10px] tracking-[0.4em] uppercase mt-2 font-bold">Secure Virtualization v4.5</p>
        </div>

        <div class="glass p-8 relative shadow-2xl">
            <div class="relative border border-white/5 rounded-3xl p-10 text-center bg-white/[0.01] group transition-all">
                <input type="file" id="fileInput" accept=".lua">
                <div class="mb-4 inline-flex p-4 rounded-2xl bg-[#ff005510] text-[#ff0055]">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/></svg>
                </div>
                <h2 id="fileName" class="text-lg font-bold uppercase tracking-tight">Select Script</h2>
                <p id="fileInfo" class="text-gray-500 text-[10px] uppercase mt-1">Tap to load local file</p>
            </div>

            <button id="obfBtn" disabled class="mt-8 w-full py-5 btn-glow rounded-2xl font-bold uppercase tracking-widest text-xs text-white disabled:opacity-10 transition-all active:scale-95">
                Deploy Virtualization
            </button>
            
            <div id="status" class="mt-6 text-[9px] uppercase tracking-[0.3em] text-center text-gray-700 font-bold italic">
                System Standby
            </div>
        </div>
    </div>

    <script type="application/lua" id="lua-logic">
        function Virtualize(source)
            local key = math.random(1, 255)
            local res = {}
            for i = 1, #source do
                res[i] = string.byte(source, i) ~ key
            end
            local data = "{" .. table.concat(res, ",") .. "}"
            
            return "--[[ Protected by Zentrofuscator Premium ]]\nlocal _d=" .. data .. "\nlocal _k=" .. key .. "\nreturn(function(d,k)local c=string.char;local r='';for i=1,#d do r=r..c(d[i]~k)end;local f=load(r);return f()end)(_d,_k)"
        end
    </script>

    <script>
        const input = document.getElementById('fileInput');
        const btn = document.getElementById('obfBtn');
        const status = document.getElementById('status');
        const fileName = document.getElementById('fileName');

        // Check if Fengari loaded
        window.onload = () => {
            if (typeof fengari === 'undefined') {
                status.innerText = "CDN ERROR: REFRESH PAGE";
                status.style.color = "orange";
            }
        };

        input.onchange = (e) => {
            if (e.target.files[0]) {
                fileName.innerText = e.target.files[0].name.toUpperCase();
                btn.disabled = false;
                status.innerText = "AUTHENTICATED";
                status.style.color = "#ff0055";
            }
        };

        btn.onclick = () => {
            if (typeof fengari === 'undefined') return alert("Library not loaded yet!");
            
            status.innerText = "GENERATING V-TABLES...";
            const reader = new FileReader();
            
            reader.onload = (e) => {
                try {
                    const L = fengari.L;
                    const luaSource = document.getElementById('lua-logic').innerHTML;
                    
                    fengari.load(luaSource)(L);
                    fengari.lua.lua_getglobal(L, "Virtualize");
                    fengari.lua.lua_pushstring(L, e.target.result);
                    
                    if (fengari.lua.lua_pcall(L, 1, 1, 0) !== 0) {
                        throw new Error(fengari.lua.lua_tostring(L, -1));
                    }
                    
                    const result = fengari.lua.lua_tostring(L, -1);
                    
                    const blob = new Blob([result], { type: 'text/plain' });
                    const a = document.createElement('a');
                    a.href = URL.createObjectURL(blob);
                    a.download = "zentro_protected.lua";
                    a.click();
                    
                    status.innerText = "PROTECTION DEPLOYED";
                } catch (err) {
                    status.innerText = "VM FAULT: CHECK LOGS";
                    console.error(err);
                }
            };
            reader.readAsText(input.files[0]);
        };
    </script>
</body>
</html>
